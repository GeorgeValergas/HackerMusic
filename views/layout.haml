!!!
%html
  %head
    %title Hacker Music
    %link{:rel => 'stylesheet', :type => 'text/css', :href => '/style/hm.css'}
    %script{:src => '/script/jquery-1.3.2.js'}
    %script{:src => '/script/hm.js'}
  %body
    %h1 
      %a{:href => '/', :title => 'Hacker Music'} Hacker Music
    - if(!@notice.nil?)
      %h2=@notice
    - if(@current_song)
      %h3= "Now Playing: #{@current_song[:title]} by #{@current_song[:artist]}"
    - if(@user.nil?)
      %form{:action => '/login', :method => 'post'}
        Username:
        %input{:type => 'text', :name => 'login'}
        Password:
        %input{:type => 'password', :name => 'password'}
        %input{:type => 'submit', :value => 'Log In'}
    - else
      %a{:href => '/logout'} Log out
      |
      %a{:href => '/change'} Change Password
      |
      %a{:href => '/cancel/all'} Clear My Votes
      - if @user[:is_admin]
        |
        %a{:href => '/admin'} Admin
    .search
      %form{:id => 'search'}
        %input{:type => 'text', :name => 'q', :id => 'q', :size => '71'}
        %input{:type => 'submit', :name=>'go', :value => 'Search', :id => 'searchbutton'}
    .browse
      Browse By:
      %a{:href => '/title'} Title
      %a{:href => '/artist'} Artist
      %a{:href => '/genre'} Genre
      %a{:href => '/album'} Album
      %a{:href => '/year'} Year
    .right
      %h2 Upcoming:
      %ul
        - @upcoming.each do |song|
          %li
            %a{:href => "/vote/#{song[:song_id]}"}= song[:title]
            (#{song[:cnt]})
            %br
            %small= 'By: ' + song[:artist]
      - if @my_votes
        %h2 My Votes: (#{($CONFIG[:settings][:max_votes].to_i - @my_votes.count).to_s} left)
        %ul
          - @my_votes.each do |v|
            %li
              #{v[:title]} 
              |
              %br
              %small 
                by #{v[:artist]}
                %a{:href => '/cancel/' + v[:vote_id].to_s} Cancel
            
    #main
      =yield
    - session[:notice] = ''